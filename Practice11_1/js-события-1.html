<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">

    <style>
    body {
      font-size: 16px;
      line-height: 22px;
      font-family: "TT Norms Pro","Arial",sans-serif;
      color: #333;
      word-wrap: break-word;
      max-width: 640px;
    }
    h1 {
      font-size: 24px;
    }
    h2 {
      font-size: 18px;
    }


    p{
      margin-bottom: 2em;
    }
    .code {
      background-color: #f8f8f8;
      font-size: 16px;
      font-family: "Ubuntu Mono","Menlo","Monaco","Consolas","Courier New",monospace;
    }

    </style>

  </head>
  <body>


<h1>Конспект «События в JavaScript». Раздел 1</h1>

<p><b>События</b> — действия пользователя на странице (клик по кнопке, нажатие клавиши).</p>
<h2>Добавление обработчиков событий</h2>

<div class="code">
  <p>button.addEventListener('click', function () {<br>
    // Инструкции<br>
  });</p>
</div>

<p>В примере:</p>

<p> — <b>button</b> — элемент, на котором мы хотим «слушать» событие.<br>
 — <b>ddEventListener()</b> — функция добавления обработчика события на элемент.<br>
 — <b>'click'</b> — общепринятое название события, первый параметр функции addEventListener. Названия всех событий можно посмотреть здесь.<br>
 Второй параметр addEventListener — функция-обработчик, в ней записаны инструкции, которые выполнятся, только <b>когда произойдёт событие</b>.</p>

<p>Обратите внимание, <b>мы передаём функцию, а не её вызов</b>. Если мы вызовем функцию, код из этой функции выполнится сразу и больше не сработает. А нам нужно, чтобы код выполнился <b>асинхронно</b> — в момент, когда произойдёт событие.</p>
<div class="code">
<p>// Так добавлять обработчик неправильно</p>

<p>button.addEventListener('click', function () {<br>
 console.log('Клик по кнопке');<br>
}());<br>
// Сообщение сразу же выведется в консоль</p>

<br>
<p>// А такой код верный</p>

<p>button.addEventListener('click', function () {<br>
 console.log('Клик по кнопке');<br>
});<br>
// Сообщение выведется, когда произойдёт событие клика</p>
</div>

<p>В примере выше мы передаём в обработчик функцию, у которой нет своего имени, она не записана в переменную. Мы создали её там же, где передаём. Такие функции, которые создаются в момент передачи и не имеют имени, называются анонимными функциями.</p>

<h2>Объект event</h2>

<p>Объект event — параметр функции-обработчика. Он всегда передаётся браузером в эту функцию в момент наступления события. Этот объект содержит много полезных свойств и методов.</p>

<p>Чтобы использовать event, достаточно указать этот объект параметром функции-обработчика и написать инструкции. Остальное сделает JavaScript. Среди некоторых разработчиков принято называть параметр сокращённо — evt, во избежание ошибок.</p>

<h2>Действия по умолчанию</h2>

<p>Некоторые элементы страницы имеют действия по умолчанию или дефолтные действия. Например, клик по кнопке отправления формы вызывает отправку данных этой формы на сервер, а при клике по ссылке браузер переходит по этой ссылке.</p>

<p>Объект event содержит метод, который отменяет действие элемента по умолчанию: preventDefault().</p>

<div class="code">
<p>link.addEventListener('click', function(evt) {<br>
 // Отменяем действие по умолчанию<br>
 evt.preventDefault();</p>

<p> // Добавляем инструкции для события клика<br>
 console.log('Произошёл клик');<br>
});</p>
</div>

<h2>Клавиатурные события</h2>

<p>У события «нажатие на клавишу» есть специальное название — 'keydown'. Такое событие срабатывает при нажатии на <b>любую клавишу</b>. Обратите внимание, слушать это событие можно только на элементах, которые имеют состояние фокуса: поля ввода, кнопки, элементы с атрибутом tabindex, <b>документ</b>. При нажатии фокус должен находиться на соответствующем элементе.</p>

<p>Если мы хотим поймать нажатие какой-то конкретной клавиши, можно обратиться к свойству keyCode объекта event. Это свойство содержит код нажатой клавиши. Например, у Enter код 13, а у ESC — 27. Эти номера универсальны и одинаковы в любой раскладке. Найти код любой клавиши можно здесь.</p>

<div class="code">
<p>document.addEventListener('keydown', function(evt) {<br>
 // Проверяем, что код клавиши равен 27<br>
 if (evt.keyCode === 27) {<br>
 // Код отсюда выполнится только при нажатии ESC<br>
 }<br>
});</p>
</div>
<p>Кроме keyCode есть и другие свойства для определения нажатой клавиши. Например, key и code. Они возвращают названия клавиш, а не их номера. Эти свойства пока поддерживаются не во всех браузерах, но когда поддержка станет лучше, стоит начать использовать их вместо keyCode в соответствии с современным стандартом JavaScript.</p>

<script src="src/script.js"></script>
</body>
</html>
